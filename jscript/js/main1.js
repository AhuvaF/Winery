const arrMainPagePick=[
    { 'src': 'יין/w1.jpg',"id": '1', "מחיר": '280 ' , "תיאור": 'פרייבט רזרב 1848 מגנום' ,  "סוג": '1' , "קטגוריה":'יין'},
{ 'src': 'יין/w2.jpg',"id": '2', "מחיר": '69', "תיאור": 'בקבוק אליפות דרגון פייר מנגו',  "סוג": '1' , "קטגוריה":'יין' },
{ 'src': 'יין/w3.jpg',"id": '3', "מחיר": '73', "תיאור": 'ברקן בטא גרי',  "סוג": '1'  , "קטגוריה":'יין' },
{ 'src': 'יין/w5.jpg',"id": '4', "מחיר": '199', "תיאור": 'ירושלים ספיישל רזרב' ,  "סוג": '1'  , "קטגוריה":'יין'},
{ 'src': 'יין/w4.jpg', "id": '5', "מחיר": '40', "תיאור": 'טפרברג ויזין קברנה סוביון' ,  "סוג": '1'  , "קטגוריה":'יין'},
{ 'src': 'יין/w6.jpg', "id": '6',"מחיר": '59', "תיאור": 'לאנגלואה שאטו סומור אדום' ,  "סוג": '1'  , "קטגוריה":'יין'},
{ 'src': 'יין/w7.jpg', "id": '7', "מחיר": '65', "תיאור": 'לואי ברנד קוט זה רון' ,  "סוג": '1'  , "קטגוריה":'יין'},
{ 'src': 'יין/w8.jpg', "id": '8', "מחיר": '69', "תיאור": 'הר גליל רוזה' ,  "סוג": '1'  , "קטגוריה":'יין'},
{ 'src': 'יין/w9.jpg', "id": '9', "מחיר": '45', "תיאור": 'לואי אשנוואר סירה' ,  "סוג": '1'  , "קטגוריה":'יין'},
{ 'src': 'יין/w10.jpg', "id": '10', "מחיר": '230', "תיאור": 'צובה טרסה' ,  "סוג": ''  , "קטגוריה":'יין'},
{ 'src': 'יין/w11.jpg', "id": '11', "מחיר": '125', "תיאור": 'צובה מצודה בלנד רזרב 19' ,  "סוג": ''  , "קטגוריה":'יין'},
{ 'src': 'יין/w12.jpg', "id": '12', "מחיר": '119', "תיאור": 'מורלי בלנד רזרב ' ,  "סוג": '1'  , "קטגוריה":'יין'},
{ 'src': 'יין/w13.jpg', "id": '13', "מחיר": '49', "תיאור": 'פורטה 6 אדום' ,  "סוג": ''  , "קטגוריה":'יין'},
{ 'src': 'יין/w14.jpg', "id": '14', "מחיר": '39', "תיאור": 'שמינית המושבה חצי יבש' ,  "סוג": ''  , "קטגוריה":'יין'},

{ 'src': 'מארז/p1.jpg', "id": '15', "מחיר": '159', "תיאור": 'פסגות פיק עם 2 כוסות יין ' ,   "סוג":'1' ,"קטגוריה":'מארזים'},
{ 'src': 'מארז/p2.jpg', "id": '16', "מחיר": '150', "תיאור": 'טפרברג 3 יינות קינוח' ,   "סוג":'1' ,"קטגוריה":'מארזים'},
{ 'src': 'מארז/p3.jpg', "id": '17', "מחיר": '105', "תיאור": 'ברטנורא מבעבע רוזה עם 2 כוסות' , "סוג":' ' ,"קטגוריה":'מארזים'},
{ 'src': 'מארז/p4.jpg', "id": '18', "מחיר": '149', "תיאור": 'מארז גאטו נגרו עם סכין שף' ,  "סוג":'1' ,"קטגוריה":'מארזים'},
{ 'src': 'מארז/p5.jpg', "id": '19', "מחיר": '150', "תיאור": 'מארז זוגי וי קסטל' ,  "סוג":'1' ,"קטגוריה":'מארזים '},
{ 'src': 'מארז/p6.jpg', "id": '20', "מחיר": '65', "תיאור": 'יין צילינדר בלו נאן מבעבע זהב' ,   "סוג":'1' ,"קטגוריה":'מארזים'},
{ 'src': 'מארז/p7.jpg', "id": '21', "מחיר": '229', "תיאור": 'יינות יקב קסטל-פטיט ורוזה' ,  "סוג":'1' ,"קטגוריה":'מארזים'},

{ 'src': 'ויסקי/v1.jpg', "id": '22', "מחיר": '109', "תיאור": 'אילה מיסט דה לוקס' ,  "סוג":'1' ,"קטגוריה":'משקאות חריפים'},
{ 'src': 'ויסקי/v2.jpg', "id": '23', "מחיר": '179', "תיאור": 'גוני ווקר גולד' ,  "סוג":' ' ,"קטגוריה":'משקאות חריפים'},
{ 'src': 'ויסקי/v3.webp', "id": '25', "מחיר": '449', "תיאור": 'גרן גירי רנסנס' ,  "סוג":' ' ,"קטגוריה":'משקאות חריפים'},
{ 'src': 'ויסקי/v4.jpg', "id": '26', "מחיר": '219', "תיאור": 'גלנדמו רגי סיגנט' ,  "סוג":'1' ,"קטגוריה":'משקאות חריפים'},
{ 'src': 'ויסקי/v5.jpg', "id": '27', "מחיר": '199', "תיאור": 'גלנמורגי לסנטה' ,  "סוג":'1' ,"קטגוריה":'משקאות חריפים'},
{ 'src': 'ויסקי/v6.jpeg', "id": '28', "מחיר": '109', "תיאור": 'גק דניאל דבש' ,  "סוג":'1' ,"קטגוריה":'משקאות חריפים'},
{ 'src': 'ויסקי/v7.webp', "id": '29', "מחיר": '1399', "תיאור": 'מורטלך נון אייג' ,  "סוג":'1' ,"קטגוריה":'משקאות חריפים'},
{ 'src': 'ויסקי/v9.jpg', "id": '30', "מחיר": '289', "תיאור": 'מילק אנד האני אלמנטס שרי' ,  "סוג":' ' ,"קטגוריה":'משקאות חריפים'},
{ 'src': 'ויסקי/v8.jpg', "id": '31', "מחיר": '225', "תיאור": 'לאדייג' ,  "סוג":' ' ,"קטגוריה":'משקאות חריפים'},
{ 'src': 'ויסקי/v10.jpeg', "id": '32', "מחיר": '139', "תיאור": 'שיבס ריגל' ,  "סוג":'1' ,"קטגוריה":'משקאות חריפים'},
{ 'src': 'ויסקי/v11.jpg', "id": '33', "מחיר": '120', "תיאור": 'בלאק לייבל' ,  "סוג":' ' ,"קטגוריה":'משקאות חריפים'},

{ 'src': 'קוקטייל/k2.jpg', "id": '34', "מחיר": '149.9', "תיאור": 'ואן גוך מלון' ,  "סוג":'1' ,"קטגוריה":'קוקטייל'},
{ 'src': 'קוקטייל/k1.jpg', "id": '35', "מחיר": '89', "תיאור": 'קוקטייל מנגו דה זאנר 700 מ"ל' ,  "סוג":' ' ,"קטגוריה":'קוקטייל'},
{ 'src': 'קוקטייל/k3.jpg', "id": '36', "מחיר": '99', "תיאור": 'טרי אוליבס לימון ליים' ,  "סוג":'1' ,"קטגוריה":'קוקטייל'},
{ 'src': 'קוקטייל/k4.jpg', "id": '37', "מחיר": '190', "תיאור": 'מארז קוקטייים אמור ' ,  "סוג":' ' ,"קטגוריה":'קוקטייל'},
{ 'src': 'קוקטייל/k5.jpg', "id": '38', "מחיר": '149', "תיאור": 'מארז טעימות קוקטיילים ' ,  "סוג":'1' ,"קטגוריה":'קוקטייל'},
{ 'src': 'קוקטייל/k6.jpg', "id": '39', "מחיר": '8.9', "תיאור": 'מי טוניק נורדיק בטעם גינגייר אייל' ,  "סוג":' ' ,"קטגוריה":'קוקטייל'},
{ 'src': 'קוקטייל/k7.jpg', "id": '40', "מחיר": '8.9', "תיאור": 'מי טוניק נורדיק בטעם פירות יער ונענע' ,  "סוג":' ' ,"קטגוריה":'קוקטייל'},
{ 'src': 'קוקטייל/k8.jpg', "id": '41', "מחיר": '39', "תיאור": 'מימוזה אנגלמן' ,  "סוג":' ' ,"קטגוריה":'קוקטייל'},
{ 'src': 'קוקטייל/k9.jpg', "id": '42', "מחיר": '100', "תיאור": 'מארז קוקטיילים 12 י"ח להקפאה' ,  "סוג":' ' ,"קטגוריה":'קוקטייל'},
{ 'src': 'קוקטייל/k10.jpg', "id": '43', "מחיר": '89', "תיאור": 'קוקטייל אמור מיקונס סאנאט 700 מ"ל' ,  "סוג":' ' ,"קטגוריה":'קוקטייל'},
{ 'src': 'קוקטייל/k11.jpg', "id": '44', "מחיר": '89', "תיאור": 'קוקטייל אמור שרי סמאש 700 מ"ל' ,  "סוג":' ' ,"קטגוריה":'קוקטייל'},
{ 'src': 'קוקטייל/k12.jpg', "id": '45', "מחיר": '9.9', "תיאור": 'קוקטייל לה קוק  פינה קולדה 330מ"ל' ,  "סוג":' ' ,"קטגוריה":'קוקטייל'},
{ 'src': 'קוקטייל/k13.jpg', "id": '46', "מחיר": '9.9', "תיאור": 'קוקטייל לה קוק קוסמופוליטן 330מ"ל' ,  "סוג":' ' ,"קטגוריה":'קוקטייל'},
{ 'src': 'קוקטייל/k14.jpg', "id": '47', "מחיר": '35', "תיאור": 'קוקטייל סונדי אמור 200 מ"ל' ,  "סוג":'1' ,"קטגוריה":'קוקטייל'},
{ 'src': 'קוקטייל/k15.jpg', "id": '48', "מחיר": '75', "תיאור": 'רוטן אגוזי לוז' ,  "סוג":'1' ,"קטגוריה":'קוקטייל'},
{ 'src': 'קוקטייל/k16.jpg', "id": '49', "מחיר": '73', "תיאור": 'רוטן וורדים' ,  "סוג":'1' ,"קטגוריה":'קוקטייל'},
{ 'src': 'קוקטייל/k17.jpg', "id": '50', "מחיר": '73', "תיאור": 'רוטן פסיפלורה' ,  "סוג":'1' ,"קטגוריה":'קוקטייל'},
{ 'src': 'קוקטייל/k18.jpg', "id": '51', "מחיר": '65', "תיאור": 'רוטן קיווי' ,  "סוג":'1' ,"קטגוריה":'קוקטייל'},
{ 'src': 'קוקטייל/k19.jpg', "id": '52', "מחיר": '60.9', "תיאור": 'רוטן קרמל' ,  "סוג":'1' ,"קטגוריה":'קוקטייל'},
{ 'src': 'קוקטייל/k20.jpg', "id": '53', "מחיר": '60.9', "תיאור": 'רוטן שקדים' ,  "סוג":'1' ,"קטגוריה":'קוקטייל'}

]

  let currentCategory = ''
const changeForFirstPage = () => {
    arrMainPagePick.forEach(changeForCategory);
}
let container = document.querySelector('.mainPickFirsPage');
// container.style.paddingButton='10%'
let arrsal = [];

function changeForCategory(theChoice) {
    // if('1' == theChoice){
    //     let firstp=document.querySelector('.firstP')
    //     let mainCardPi = document.createElement('div');
    //     let img1=document.createElement('img')
    //     img1.src='תמונות יין/chvit3.jpg'
    //     img1.style.width = '100%';
    //     // img1.style.height ='10%';
    //     mainCardPi.append(img1)
    //     firstp.append(mainCardPi)
    // }
    currentCategory = theChoice; // שמירת הקטגוריה הנוכחית
    container.innerHTML = '';
    let moreD = document.querySelector('.moreD');
    moreD.innerHTML = '';
    arrMainPagePick.forEach((item, index) => 
        goChange(item, index, theChoice));
}

function goChange(item, index, theChoice) {

    if (sessionStorage.getItem("data_sal") != null) {
        let str = sessionStorage.getItem("data_sal");
        arrsal = JSON.parse(str);
    }

    if (item['קטגוריה'] == theChoice || item['סוג'] == theChoice) {
        let mainCardPi = document.createElement('div');
        let img = document.createElement('img');
        img.src = `./תמונות יין/${item.src}`;
        img.style.width = '100%';

        let cardDescribe = document.createElement('h5');
        let cardprice = document.createElement('h6');
        cardDescribe.style.fontSize = '700%';
        cardDescribe.innerText = `${item['תיאור']}`;
        cardprice.style.fontSize = '600%';
        cardprice.innerText = `${item['מחיר']}₪`;
        
        let addButton = document.createElement('button');
        addButton.classList.add('add-to-cart-button');
        addButton.innerHTML = `
            <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cart-plus" viewBox="0 0 16 16">
                <path d="M9 5.5a.5.5 0 0 0-1 0V7H6.5a.5.5 0 0 0 0 1H8v1.5a.5.5 0 0 0 1 0V8h1.5a.5.5 0 0 0 0-1H9z"/>
                <path d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1zm3.915 10L3.102 4h10.796l-1.313 7zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0m7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
            </svg>`;
        
        addButton.setAttribute("onclick", `f2(${parseInt(item.id)})`);
        // addButton.style.marginBottom='100%'
        mainCardPi.append(img, cardDescribe, cardprice, addButton);
        mainCardPi.classList.add('card-item');
        mainCardPi.id = index;
        container.append(mainCardPi);

     // הוספת מאזין לאירוע לחיצה על כל אזור הכפתור
    addButton.addEventListener('click', handleAddButtonClick);


        img.addEventListener('click', function () {
            moreDitail(item);
        });
    }
}
//כפתור פרטים נוספים
const moreDitail = (item) => {
    let changePick = document.querySelector('.images-container');
    container.innerHTML = '';
    changePick.style.width = 0;

    let moreD = document.querySelector('.moreD');
    let divDit = document.createElement('div');
    let newImg = document.createElement('img');
    let h1 = document.createElement('h1');
    //העלת המדף ללמעלה
    document.documentElement.scrollTop = 0;
    //התמונה הרצויה
    newImg.src = `./תמונות יין/${item.src}`;
    h1.style.position = 'absolute';
    h1.style.right = '55%'; // מיקום מימין
    h1.style.top = '450px'; // מיקום מלמעלה
    // h1.style.marginRight = '40%';
   
    h1.innerText = item.תיאור + "  " +"\n"+ item.מחיר + " ₪";
    h1.style.fontSize = '1100%';
    newImg.style.width = '30%';
    newImg.style.marginRight = '20%';
    changePick.width = 0;
    let addButton = document.createElement('button');
    addButton.style.marginLeft='30%'
    addButton.classList.add('add-to-cart-button');
    addButton.innerHTML = `
        <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" class="bi bi-cart-plus" viewBox="0 0 16 16">
            <path d="M9 5.5a.5.5 0 0 0-1 0V7H6.5a.5.5 0 0 0 0 1H8v1.5a.5.5 0 0 0 1 0V8h1.5a.5.5 0 0 0 0-1H9z"/>
            <path d="M.5 1a.5.5 0 0 0 0 1h1.11l.401 1.607 1.498 7.985A.5.5 0 0 0 4 12h1a2 2 0 1 0 0 4 2 2 0 0 0 0-4h7a2 2 0 1 0 0 4 2 2 0 0 0 0-4h1a.5.5 0 0 0 .491-.408l1.5-8A.5.5 0 0 0 14.5 3H2.89l-.405-1.621A.5.5 0 0 0 2 1zm3.915 10L3.102 4h10.796l-1.313 7zM6 14a1 1 0 1 1-2 0 1 1 0 0 1 2 0m7 0a1 1 0 1 1-2 0 1 1 0 0 1 2 0"/>
        </svg>`;
    addButton.setAttribute("onclick", `f2(${parseInt(item.id)})`);
    divDit.append(newImg, h1,addButton);
    moreD.append(divDit);

    let backButton = document.createElement('button');
    backButton.classList.add('back-to-button');
    backButton.style.position = 'absolute';
    // backButton.style.right = '70%';
    backButton.style.top = '570px';
    // הוספת תוכן הכפתור עם סמל שונה (לדוגמה, חץ אחורה)
    backButton.innerHTML = `
        <svg xmlns="http://www.w3.org/2000/svg" width="10" height="10" fill="currentColor" class="bi bi-arrow-left" viewBox="0 0 16 16">
            <path fill-rule="evenodd" d="M15 8a.5.5 0 0 1-.5.5H2.707l5.147 5.146a.5.5 0 0 1-.708.708l-6-6a.5.5 0 0 1 0-.708l6-6a.5.5 0 1 1 .708.708L2.707 7.5H14.5A.5.5 0 0 1 15 8z"/>
        </svg>
        חזרה אחורה
    `;
    moreD.append(backButton);
    backButton.addEventListener('click',backButtonClick);
}

//כפתור חזרה אחורה
backButtonClick = () => {
    let changePick = document.querySelector('.images-container');
    changePick.style.width = '100%';
    // startTheSlide(); // התחלת החלקת התמונות מחדש
    changeForCategory(currentCategory);
}

///על מנת שהגלילה תותיר את שורת הדפדוף למעלה
window.addEventListener('scroll', function() {
    const category = document.querySelector('.categories');
    const icon = this.document.querySelector('.icon')
    if (window.scrollY > 20) {
        category.style.position = 'fixed';
        category.style.width = '100%'
        category.style.top = '0';

        icon.style.position = 'fixed';
        icon.style.width = '100%'
        icon.style.top = '0';
        icon.style.marginRight='0%';
    } else {
        category.style.position = 'sticky';
        icon.style.position = 'relative';
        icon.style.width = '100%'
        icon.style.marginRight='40%';
    }
});

//פונקציה של הוספה לסל
const f2 = (myid) => {
    //חפש לי ברשימה את האוביקט עליו לחצנו
    let obj = arrMainPagePick.find(x => x.id == myid)
    obj.count = 1
    //הכנסה של הנתונים לסל
    arrsal.push(obj)
    // JSON.stringify-תמיר לי את המערך למחרוזת
    //שמירה מחדש
    sessionStorage.setItem("data_sal", JSON.stringify(arrsal))
}



////כשלוחצים על הוסף לסל 
// הפונקציה שמפעילה את האנימציה
function handleAddButtonClick(event) {
    // הוספת מחלקת האנימציה לכפתור
    event.currentTarget.classList.add('animate-grow');

    // הסרת מחלקת האנימציה בסיום האנימציה
    setTimeout(() => {
        event.currentTarget.classList.remove('animate-grow');
    }, 500); // משך זמן האנימציה
}